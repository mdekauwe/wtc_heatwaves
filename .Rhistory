setwd("/Users/mdekauwe/research/wtc_heatwaves")
wtc <- read.csv("raw_data/WTC_TEMP-PARRA_CM_WTCFLUX-CANOPYTEMP_20161029-20161115_L0.csv")
wtc$DateTime <- as.POSIXct(wtc$DateTime_hr,format="%Y-%m-%d %T",tz="GMT")
wtc$DateTime_hr <- nearestTimeStep(wtc$DateTime,nminutes=60,align="floor")
wtc.m1 <- summaryBy(PAR+VPD+Tair_al+Photo+Trans+TargTempC_Avg~DateTime_hr+chamber+T_treatment,data=wtc,#subset(wtc,DoorCnt==0),
FUN=mean,keep.names=T,na.rm=T)
libaray("doBy")
libray("doBy")
library("doBy")
wtc.m1 <- summaryBy(PAR+VPD+Tair_al+Photo+Trans+TargTempC_Avg~DateTime_hr+chamber+T_treatment,data=wtc,#subset(wtc,DoorCnt==0),
FUN=mean,keep.names=T,na.rm=T)
wtc.m1
linkdf <- data.frame(chamber = levels(as.factor(wtc$chamber)),
HWtrt = c("C","C","HW","HW","C","C","HW","C","HW","HW","C","HW"))#swapped C12 and C08
wtc.m <- merge(wtc.m1,linkdf,by="chamber")
wtc.m$combotrt <- factor(paste(wtc.m$T_treatment,wtc.m$HWtrt,sep="_"))
#- average and SEs for each treatment.
wtc.m2 <- summaryBy(.~DateTime_hr+combotrt,data=subset(wtc.m1,as.Date(DateTime_hr) < as.Date("2016-11-11")),FUN=c(mean,se))
starttime <- as.POSIXct("2016-10-29 00:00:00",tz="GMT")
wtc.m2.two
